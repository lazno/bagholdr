<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard — Bagholdr</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: 'Inter', system-ui, sans-serif; background: #f8fafc; color: #1e293b; font-size: 14px; -webkit-font-smoothing: antialiased; }
    .container { max-width: 1200px; margin: 0 auto; padding: 24px; }

    /* ===== TOP SECTION ===== */
    .top-section {
      background: white;
      border: 1px solid #e2e8f0;
      border-radius: 12px;
      padding: 20px 24px;
      margin-bottom: 24px;
    }

    .top-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .portfolio-select {
      font-size: 14px;
      font-weight: 600;
      padding: 6px 12px;
      padding-right: 28px;
      border: 1px solid #e2e8f0;
      border-radius: 8px;
      background: white;
      color: #0f172a;
      cursor: pointer;
      appearance: none;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%2364748b' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 10px center;
    }

    .sync-status {
      font-size: 12px;
      color: #64748b;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .sync-dot { width: 6px; height: 6px; border-radius: 50%; background: #22c55e; }

    /* Stats row - all key numbers in a row */
    .stats-row {
      display: flex;
      align-items: flex-end;
      gap: 40px;
    }

    .stat-item {}
    .stat-label { font-size: 11px; text-transform: uppercase; letter-spacing: 0.5px; color: #94a3b8; margin-bottom: 6px; }
    .stat-value { font-size: 18px; font-weight: 600; font-variant-numeric: tabular-nums; }
    .stat-value.large { font-size: 28px; font-weight: 700; letter-spacing: -0.5px; }
    .stat-sub { font-size: 12px; color: #64748b; margin-top: 2px; }
    .positive { color: #16a34a; }
    .negative { color: #dc2626; }

    .stat-item.return-stat { display: flex; align-items: flex-end; gap: 16px; }
    .return-data { min-width: 160px; }
    .return-data .stat-label { margin-bottom: 6px; }
    .return-values { display: flex; align-items: baseline; gap: 8px; }
    .return-periods { display: flex; gap: 1px; }
    .return-periods button { padding: 3px 8px; border: 1px solid #e2e8f0; background: white; font-size: 10px; font-weight: 500; color: #64748b; cursor: pointer; }
    .return-periods button:first-child { border-radius: 5px 0 0 5px; }
    .return-periods button:last-child { border-radius: 0 5px 5px 0; }
    .return-periods button:not(:first-child) { border-left: none; }
    .return-periods button.active { background: #0f172a; color: white; border-color: #0f172a; }
    .return-periods button:hover:not(.active) { background: #f8fafc; }

    .stats-spacer { flex: 1; }
    .stat-item.secondary .stat-value { font-size: 15px; color: #64748b; }
    .stat-item.secondary .stat-label { color: #94a3b8; }

    /* ===== ISSUES BAR ===== */
    .issues-bar {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px 14px;
      background: #fffbeb;
      border: 1px solid #fde68a;
      border-radius: 10px;
      margin-bottom: 24px;
      font-size: 13px;
      flex-wrap: wrap;
    }

    .issues-label {
      font-weight: 600;
      color: #92400e;
      white-space: nowrap;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .issues-divider {
      width: 1px;
      height: 20px;
      background: #fde68a;
    }

    .issue-chip {
      display: inline-flex;
      align-items: center;
      gap: 5px;
      padding: 4px 10px;
      background: white;
      border: 1px solid #e5e7eb;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.15s;
      font-size: 12px;
    }
    .issue-chip:hover { background: #f9fafb; border-color: #d1d5db; }
    .issue-chip.error { border-color: #fecaca; background: #fef2f2; }
    .issue-chip.error:hover { background: #fee2e2; }
    .issue-chip.warning { border-color: #fde68a; background: #fffbeb; }
    .issue-chip.warning:hover { background: #fef3c7; }
    .issue-chip.allocation { border-color: #c7d2fe; background: #eef2ff; }
    .issue-chip.allocation:hover { background: #e0e7ff; }

    .issue-dot { width: 5px; height: 5px; border-radius: 50%; flex-shrink: 0; }
    .issue-dot.error { background: #ef4444; }
    .issue-dot.warning { background: #f59e0b; }
    .issue-dot.allocation { background: #6366f1; }

    .issue-chip svg { width: 10px; height: 10px; color: #9ca3af; margin-left: 1px; flex-shrink: 0; }

    /* ===== CARDS ===== */
    .card { background: white; border: 1px solid #e2e8f0; border-radius: 12px; overflow: hidden; margin-bottom: 24px; }
    .card-header { display: flex; justify-content: space-between; align-items: center; padding: 14px 20px; border-bottom: 1px solid #f1f5f9; }
    .card-title { font-size: 12px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; color: #64748b; }

    /* ===== CHART ===== */
    .chart-container { padding: 20px; padding-top: 16px; }
    .chart-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; }
    .chart-range { display: flex; gap: 2px; }
    .chart-range button { padding: 4px 10px; border: 1px solid #e2e8f0; background: white; font-size: 11px; font-weight: 500; color: #64748b; cursor: pointer; }
    .chart-range button:first-child { border-radius: 6px 0 0 6px; }
    .chart-range button:last-child { border-radius: 0 6px 6px 0; }
    .chart-range button.active { background: #0f172a; color: white; border-color: #0f172a; }
    .chart-range button:hover:not(.active) { background: #f8fafc; }

    .chart-wrapper { position: relative; height: 200px; margin-bottom: 8px; }
    .chart-svg { width: 100%; height: 100%; }

    .chart-legend { display: flex; gap: 20px; font-size: 11px; color: #64748b; padding-left: 40px; }
    .legend-item { display: flex; align-items: center; gap: 6px; }
    .legend-line { width: 14px; height: 2px; border-radius: 1px; }
    .legend-line.value { background: #16a34a; }
    .legend-line.cost { background: #94a3b8; }
    .legend-line.benchmark { background: #3b82f6; }

    /* Main grid */
    .main-grid { display: grid; grid-template-columns: 1fr 340px; gap: 24px; margin-bottom: 24px; }

    /* ===== SLEEVES ===== */
    .sleeve-row {
      display: grid;
      grid-template-columns: 1fr 85px 50px 55px 45px;
      align-items: center;
      padding: 12px 16px;
      border-bottom: 1px solid #f1f5f9;
      font-size: 13px;
    }
    .sleeve-row:last-child { border-bottom: none; }
    .sleeve-row { cursor: pointer; transition: background 0.1s; }
    .sleeve-row:hover { background: #f8fafc; }
    .sleeve-row.selected { background: #f1f5f9; }
    .sleeve-name { font-weight: 500; }

    .status-badge {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 2px 6px;
      border-radius: 4px;
      font-size: 10px;
      font-weight: 600;
      min-width: 32px;
    }
    .status-badge.ok { background: #dcfce7; color: #166534; }
    .status-badge.over { background: #fef3c7; color: #92400e; }
    .status-badge.under { background: #dbeafe; color: #1e40af; }

    .sleeve-value { text-align: right; font-variant-numeric: tabular-nums; color: #64748b; font-size: 12px; }
    .sleeve-actual { text-align: right; font-variant-numeric: tabular-nums; font-weight: 500; }
    .sleeve-target { text-align: right; font-variant-numeric: tabular-nums; color: #94a3b8; font-size: 12px; }

    .sleeve-row.child { background: #fafafa; }
    .sleeve-row.child .sleeve-name { padding-left: 16px; font-weight: 400; color: #64748b; font-size: 12px; }
    .sleeve-row.child .sleeve-name::before { content: "└ "; color: #cbd5e1; }

    /* ===== ASSETS ===== */
    .filter-row { display: flex; justify-content: space-between; align-items: center; width: 100%; }
    .tabs { display: flex; gap: 4px; }
    .tabs button { padding: 6px 14px; border: none; background: transparent; font-size: 13px; font-weight: 500; color: #64748b; cursor: pointer; border-radius: 6px; }
    .tabs button:hover { background: #f1f5f9; color: #1e293b; }
    .tabs button.active { background: #0f172a; color: white; }
    .filter-select { font-size: 12px; padding: 6px 10px; border: 1px solid #e2e8f0; border-radius: 6px; color: #64748b; }

    .table-scroll { max-height: 480px; overflow-y: auto; }
    table { width: 100%; border-collapse: collapse; }
    thead th { padding: 10px 16px; text-align: left; font-size: 10px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; color: #94a3b8; background: #f8fafc; border-bottom: 1px solid #e2e8f0; position: sticky; top: 0; z-index: 1; }
    tbody td { padding: 10px 16px; border-bottom: 1px solid #f1f5f9; }
    tbody tr:hover { background: #f8fafc; }
    tbody tr:last-child td { border-bottom: none; }
    .num { text-align: right; font-variant-numeric: tabular-nums; }
    .ticker { font-weight: 600; color: #0f172a; }
    .asset-name { color: #64748b; font-size: 12px; }
    .sleeve-tag { display: inline-block; padding: 2px 8px; background: #f1f5f9; border-radius: 4px; font-size: 11px; font-weight: 500; color: #64748b; }
    .return-cell { font-weight: 600; }

    .table-footer { padding: 12px 16px; border-top: 1px solid #f1f5f9; font-size: 12px; color: #94a3b8; text-align: center; }

    @media (max-width: 1000px) { .main-grid { grid-template-columns: 1fr; } }
  </style>
</head>
<body>
  <div class="container">
    <!-- Top Section -->
    <div class="top-section">
      <div class="top-header">
        <select class="portfolio-select">
          <option>My Portfolio</option>
          <option>Retirement Fund</option>
        </select>
        <div class="sync-status">
          <span class="sync-dot"></span>
          Synced 2 min ago
        </div>
      </div>
      <div class="stats-row">
        <div class="stat-item">
          <div class="stat-label">Invested</div>
          <div class="stat-value large">EUR 45,030</div>
        </div>
        <div class="stat-item return-stat">
          <div class="return-data">
            <div class="stat-label" id="return-label">Total Return</div>
            <div class="return-values">
              <div class="stat-value positive">+EUR 4,132</div>
              <div class="stat-sub positive">+9.4%</div>
            </div>
          </div>
          <div class="return-periods">
            <button data-period="today" data-label="Today's Return">Today</button>
            <button data-period="1w" data-label="1W Return">1W</button>
            <button data-period="1m" data-label="1M Return">1M</button>
            <button data-period="ytd" data-label="YTD Return">YTD</button>
            <button data-period="1y" data-label="1Y Return">1Y</button>
            <button data-period="cost" data-label="Total Return" class="active">Total</button>
          </div>
        </div>
        <div class="stats-spacer"></div>
        <div class="stat-item secondary">
          <div class="stat-label">Cash</div>
          <div class="stat-value">EUR 3,200</div>
        </div>
        <div class="stat-item secondary">
          <div class="stat-label">Total Value</div>
          <div class="stat-value">EUR 48,230</div>
        </div>
      </div>
    </div>

    <!-- Issues Bar -->
    <div class="issues-bar">
      <span class="issues-label">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>
        6 Issues
      </span>
      <span class="issues-divider"></span>
      <div class="issue-chip error" onclick="showIssue('missing-symbol')">
        <span class="issue-dot error"></span>
        <span>EXAMPLE.MI missing symbol</span>
        <svg viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z"/></svg>
      </div>
      <div class="issue-chip warning" onclick="showIssue('stale-prices')">
        <span class="issue-dot warning"></span>
        <span>3 stale prices</span>
        <svg viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z"/></svg>
      </div>
      <div class="issue-chip warning" onclick="showIssue('unassigned')">
        <span class="issue-dot warning"></span>
        <span>2 unassigned</span>
        <svg viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z"/></svg>
      </div>
      <div class="issue-chip allocation" onclick="showIssue('core-over')">
        <span class="issue-dot allocation"></span>
        <span>Core +2pp over</span>
        <svg viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z"/></svg>
      </div>
      <div class="issue-chip allocation" onclick="showIssue('satellite-under')">
        <span class="issue-dot allocation"></span>
        <span>Satellite -2pp under</span>
        <svg viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z"/></svg>
      </div>
      <div class="issue-chip allocation" onclick="showIssue('concentration')">
        <span class="issue-dot allocation"></span>
        <span>NVDA >5% concentration</span>
        <svg viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z"/></svg>
      </div>
    </div>

    <!-- Main Grid: Chart + Sleeves -->
    <div class="main-grid">
      <!-- Performance Chart -->
      <div class="card" style="margin-bottom: 0;">
        <div class="chart-container">
          <div class="chart-header">
            <span class="card-title">Invested Value</span>
            <div class="chart-range">
              <button>1M</button>
              <button>3M</button>
              <button class="active">6M</button>
              <button>1Y</button>
              <button>All</button>
            </div>
          </div>
          <div class="chart-wrapper">
            <svg class="chart-svg" viewBox="0 0 700 185" preserveAspectRatio="xMidYMid meet">
              <!-- Y axis -->
              <line x1="45" y1="15" x2="45" y2="150" stroke="#e2e8f0" stroke-width="1"/>
              <!-- Grid lines -->
              <line x1="45" y1="35" x2="680" y2="35" stroke="#f1f5f9" stroke-width="1"/>
              <line x1="45" y1="75" x2="680" y2="75" stroke="#f1f5f9" stroke-width="1"/>
              <line x1="45" y1="115" x2="680" y2="115" stroke="#f1f5f9" stroke-width="1"/>
              <line x1="45" y1="150" x2="680" y2="150" stroke="#e2e8f0" stroke-width="1"/>

              <!-- Y axis labels -->
              <text x="40" y="39" font-size="10" fill="#94a3b8" text-anchor="end">55k</text>
              <text x="40" y="79" font-size="10" fill="#94a3b8" text-anchor="end">48k</text>
              <text x="40" y="119" font-size="10" fill="#94a3b8" text-anchor="end">41k</text>
              <text x="40" y="154" font-size="10" fill="#94a3b8" text-anchor="end">34k</text>

              <!-- X axis labels -->
              <text x="100" y="172" font-size="10" fill="#94a3b8" text-anchor="middle">Jul</text>
              <text x="210" y="172" font-size="10" fill="#94a3b8" text-anchor="middle">Aug</text>
              <text x="320" y="172" font-size="10" fill="#94a3b8" text-anchor="middle">Sep</text>
              <text x="430" y="172" font-size="10" fill="#94a3b8" text-anchor="middle">Oct</text>
              <text x="540" y="172" font-size="10" fill="#94a3b8" text-anchor="middle">Nov</text>
              <text x="650" y="172" font-size="10" fill="#94a3b8" text-anchor="middle">Dec</text>

              <!-- Benchmark line (MSCI World) -->
              <polyline
                points="55,120 150,115 250,105 350,95 450,88 550,82 660,75"
                fill="none"
                stroke="#3b82f6"
                stroke-width="1.5"
                stroke-dasharray="4,3"
                opacity="0.6"
              />

              <!-- Cost basis line -->
              <polyline
                points="55,112 150,110 250,107 350,104 450,101 550,99 660,96"
                fill="none"
                stroke="#94a3b8"
                stroke-width="1.5"
                stroke-dasharray="6,4"
              />

              <!-- Portfolio value line -->
              <polyline
                points="55,118 100,112 150,102 200,97 250,92 300,100 350,88 400,80 450,74 500,70 550,62 600,57 660,52"
                fill="none"
                stroke="#16a34a"
                stroke-width="2.5"
              />

              <!-- Area fill -->
              <polygon
                points="55,118 100,112 150,102 200,97 250,92 300,100 350,88 400,80 450,74 500,70 550,62 600,57 660,52 660,150 55,150"
                fill="url(#areaGradient)"
                opacity="0.1"
              />

              <defs>
                <linearGradient id="areaGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                  <stop offset="0%" style="stop-color:#16a34a;stop-opacity:1" />
                  <stop offset="100%" style="stop-color:#16a34a;stop-opacity:0" />
                </linearGradient>
              </defs>
            </svg>
          </div>
          <div class="chart-legend">
            <div class="legend-item"><span class="legend-line value"></span> Invested</div>
            <div class="legend-item"><span class="legend-line cost"></span> Cost Basis</div>
            <div class="legend-item"><span class="legend-line benchmark"></span> MSCI World</div>
          </div>
        </div>
      </div>

      <!-- Sleeves -->
      <div class="card" style="margin-bottom: 0;">
        <div class="card-header">
          <span class="card-title">Sleeves</span>
        </div>
        <div class="sleeve-row" data-sleeve="core" onclick="toggleSleeveFilter('core')">
          <div class="sleeve-name">Core</div>
          <div class="sleeve-value">EUR 34,725</div>
          <div class="sleeve-actual">72%</div>
          <div class="sleeve-target">/ 70%</div>
          <div><span class="status-badge over">+2pp</span></div>
        </div>
        <div class="sleeve-row" data-sleeve="satellite" onclick="toggleSleeveFilter('satellite')">
          <div class="sleeve-name">Satellite</div>
          <div class="sleeve-value">EUR 13,505</div>
          <div class="sleeve-actual">28%</div>
          <div class="sleeve-target">/ 30%</div>
          <div><span class="status-badge under">-2pp</span></div>
        </div>
        <div class="sleeve-row child" data-sleeve="growth" onclick="toggleSleeveFilter('growth')">
          <div class="sleeve-name">Growth</div>
          <div class="sleeve-value">EUR 8,240</div>
          <div class="sleeve-actual">17%</div>
          <div class="sleeve-target">/ 18%</div>
          <div><span class="status-badge ok">ok</span></div>
        </div>
      </div>
    </div>

    <!-- Assets -->
    <div class="card">
      <div class="card-header">
        <div class="filter-row">
          <div class="tabs">
            <button class="active">All Assets</button>
            <button>Top Gainers</button>
            <button>Top Losers</button>
            <button>Largest</button>
          </div>
          <select class="filter-select" id="sleeve-filter" onchange="filterBySleeve(this.value)">
            <option value="">All Sleeves</option>
            <option value="core">Core (15)</option>
            <option value="satellite">Satellite (5)</option>
            <option value="growth">└ Growth (3)</option>
          </select>
        </div>
      </div>
      <div class="table-scroll">
        <table>
          <thead>
            <tr>
              <th>Asset</th>
              <th>Sleeve</th>
              <th class="num">Qty</th>
              <th class="num">Value</th>
              <th class="num">Weight</th>
              <th class="num">Return</th>
            </tr>
          </thead>
          <tbody id="assets-tbody">
            <tr data-sleeve="core">
              <td><span class="ticker">VWCE</span> <span class="asset-name">Vanguard FTSE All-World</span></td>
              <td><span class="sleeve-tag">Core</span></td>
              <td class="num">45</td>
              <td class="num">5,130</td>
              <td class="num">10.6%</td>
              <td class="num return-cell positive">+12.4%</td>
            </tr>
            <tr data-sleeve="core">
              <td><span class="ticker">MSFT</span> <span class="asset-name">Microsoft Corp</span></td>
              <td><span class="sleeve-tag">Core</span></td>
              <td class="num">12</td>
              <td class="num">4,536</td>
              <td class="num">9.4%</td>
              <td class="num return-cell positive">+18.2%</td>
            </tr>
            <tr data-sleeve="core">
              <td><span class="ticker">AAPL</span> <span class="asset-name">Apple Inc</span></td>
              <td><span class="sleeve-tag">Core</span></td>
              <td class="num">20</td>
              <td class="num">3,640</td>
              <td class="num">7.5%</td>
              <td class="num return-cell positive">+15.8%</td>
            </tr>
            <tr data-sleeve="satellite">
              <td><span class="ticker">AGGH</span> <span class="asset-name">iShares Global Aggregate Bond</span></td>
              <td><span class="sleeve-tag">Satellite</span></td>
              <td class="num">600</td>
              <td class="num">3,420</td>
              <td class="num">7.1%</td>
              <td class="num return-cell positive">+2.1%</td>
            </tr>
            <tr data-sleeve="core">
              <td><span class="ticker">NVDA</span> <span class="asset-name">NVIDIA Corp</span></td>
              <td><span class="sleeve-tag">Core</span></td>
              <td class="num">6</td>
              <td class="num">3,120</td>
              <td class="num">6.5%</td>
              <td class="num return-cell positive">+48.2%</td>
            </tr>
            <tr data-sleeve="core">
              <td><span class="ticker">GOOGL</span> <span class="asset-name">Alphabet Inc</span></td>
              <td><span class="sleeve-tag">Core</span></td>
              <td class="num">18</td>
              <td class="num">2,880</td>
              <td class="num">6.0%</td>
              <td class="num return-cell positive">+22.1%</td>
            </tr>
            <tr data-sleeve="core">
              <td><span class="ticker">IWDA</span> <span class="asset-name">iShares Core MSCI World</span></td>
              <td><span class="sleeve-tag">Core</span></td>
              <td class="num">30</td>
              <td class="num">2,760</td>
              <td class="num">5.7%</td>
              <td class="num return-cell positive">+10.3%</td>
            </tr>
            <tr data-sleeve="satellite">
              <td><span class="ticker">EUNA</span> <span class="asset-name">iShares Core Euro Govt Bond</span></td>
              <td><span class="sleeve-tag">Satellite</span></td>
              <td class="num">20</td>
              <td class="num">2,540</td>
              <td class="num">5.3%</td>
              <td class="num return-cell positive">+1.8%</td>
            </tr>
            <tr data-sleeve="core">
              <td><span class="ticker">AMZN</span> <span class="asset-name">Amazon.com Inc</span></td>
              <td><span class="sleeve-tag">Core</span></td>
              <td class="num">12</td>
              <td class="num">2,340</td>
              <td class="num">4.9%</td>
              <td class="num return-cell positive">+8.7%</td>
            </tr>
            <tr data-sleeve="core">
              <td><span class="ticker">META</span> <span class="asset-name">Meta Platforms Inc</span></td>
              <td><span class="sleeve-tag">Core</span></td>
              <td class="num">4</td>
              <td class="num">2,120</td>
              <td class="num">4.4%</td>
              <td class="num return-cell positive">+35.2%</td>
            </tr>
            <tr data-sleeve="core">
              <td><span class="ticker">VUAA</span> <span class="asset-name">Vanguard S&P 500</span></td>
              <td><span class="sleeve-tag">Core</span></td>
              <td class="num">22</td>
              <td class="num">1,980</td>
              <td class="num">4.1%</td>
              <td class="num return-cell positive">+14.6%</td>
            </tr>
            <tr data-sleeve="growth">
              <td><span class="ticker">IBTS</span> <span class="asset-name">iShares Treasury Bond 1-3yr</span></td>
              <td><span class="sleeve-tag">Growth</span></td>
              <td class="num">15</td>
              <td class="num">1,845</td>
              <td class="num">3.8%</td>
              <td class="num return-cell positive">+0.9%</td>
            </tr>
            <tr data-sleeve="core">
              <td><span class="ticker">JNJ</span> <span class="asset-name">Johnson & Johnson</span></td>
              <td><span class="sleeve-tag">Core</span></td>
              <td class="num">10</td>
              <td class="num">1,560</td>
              <td class="num">3.2%</td>
              <td class="num return-cell negative">-2.4%</td>
            </tr>
            <tr data-sleeve="growth">
              <td><span class="ticker">VGEA</span> <span class="asset-name">Vanguard EUR Eurozone Govt</span></td>
              <td><span class="sleeve-tag">Growth</span></td>
              <td class="num">60</td>
              <td class="num">1,440</td>
              <td class="num">3.0%</td>
              <td class="num return-cell positive">+1.2%</td>
            </tr>
            <tr data-sleeve="core">
              <td><span class="ticker">V</span> <span class="asset-name">Visa Inc</span></td>
              <td><span class="sleeve-tag">Core</span></td>
              <td class="num">5</td>
              <td class="num">1,375</td>
              <td class="num">2.9%</td>
              <td class="num return-cell positive">+11.8%</td>
            </tr>
            <tr data-sleeve="core">
              <td><span class="ticker">PG</span> <span class="asset-name">Procter & Gamble</span></td>
              <td><span class="sleeve-tag">Core</span></td>
              <td class="num">8</td>
              <td class="num">1,280</td>
              <td class="num">2.7%</td>
              <td class="num return-cell positive">+4.2%</td>
            </tr>
            <tr data-sleeve="core">
              <td><span class="ticker">KO</span> <span class="asset-name">Coca-Cola Co</span></td>
              <td><span class="sleeve-tag">Core</span></td>
              <td class="num">18</td>
              <td class="num">1,116</td>
              <td class="num">2.3%</td>
              <td class="num return-cell positive">+6.1%</td>
            </tr>
            <tr data-sleeve="growth">
              <td><span class="ticker">CORP</span> <span class="asset-name">iShares Global Corp Bond</span></td>
              <td><span class="sleeve-tag">Growth</span></td>
              <td class="num">200</td>
              <td class="num">980</td>
              <td class="num">2.0%</td>
              <td class="num return-cell positive">+3.4%</td>
            </tr>
            <tr data-sleeve="core">
              <td><span class="ticker">DIS</span> <span class="asset-name">Walt Disney Co</span></td>
              <td><span class="sleeve-tag">Core</span></td>
              <td class="num">8</td>
              <td class="num">920</td>
              <td class="num">1.9%</td>
              <td class="num return-cell negative">-8.3%</td>
            </tr>
            <tr data-sleeve="core">
              <td><span class="ticker">INTC</span> <span class="asset-name">Intel Corp</span></td>
              <td><span class="sleeve-tag">Core</span></td>
              <td class="num">25</td>
              <td class="num">750</td>
              <td class="num">1.6%</td>
              <td class="num return-cell negative">-22.1%</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="table-footer" id="table-footer">
        Showing 20 of 20 assets
      </div>
    </div>
  </div>

  <script>
    // Return period selector
    document.querySelectorAll('.return-periods button').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.return-periods button').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        // Update label
        const label = btn.getAttribute('data-label');
        document.getElementById('return-label').textContent = label;
      });
    });

    // Chart range selector
    document.querySelectorAll('.chart-range button').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.chart-range button').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
      });
    });

    // Tabs
    document.querySelectorAll('.tabs button').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.tabs button').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
      });
    });

    // Issue actions
    function showIssue(type) {
      const actions = {
        'missing-symbol': {
          title: 'Missing Yahoo Symbol',
          detail: 'EXAMPLE.MI cannot fetch prices without a Yahoo Finance symbol.',
          action: 'Go to Assets → EXAMPLE.MI → Settings → Set Yahoo Symbol'
        },
        'stale-prices': {
          title: 'Stale Prices',
          detail: 'These assets haven\'t updated in 24+ hours:\n• JNJ (2 days)\n• DIS (3 days)\n• INTC (2 days)',
          action: 'Go to Settings → Price Sync → Check symbol mappings or trigger manual refresh'
        },
        'unassigned': {
          title: 'Unassigned Assets',
          detail: 'These assets are not in any sleeve:\n• BTC-EUR\n• ETH-EUR',
          action: 'Go to Portfolio → Sleeves → Drag assets to assign them'
        },
        'core-over': {
          title: 'Core Over Target',
          detail: 'Core allocation is 72% vs 70% target (+2pp).\nThis is within warning threshold but approaching the band limit.',
          action: 'Go to Rebalance → View suggested sells to reduce Core exposure'
        },
        'satellite-under': {
          title: 'Satellite Under Target',
          detail: 'Satellite allocation is 28% vs 30% target (-2pp).\nThis is within warning threshold but approaching the band limit.',
          action: 'Go to Rebalance → View suggested buys to increase Satellite exposure'
        },
        'concentration': {
          title: 'Concentration Rule Triggered',
          detail: 'NVDA is 6.5% of portfolio, exceeding the 5% single-asset concentration limit.',
          action: 'Go to Rebalance → View suggested sells for NVDA, or adjust the concentration rule in Settings → Rules'
        }
      };

      const issue = actions[type];
      alert(`${issue.title}\n\n${issue.detail}\n\n→ ${issue.action}`);
    }

    // Sleeve filter
    let currentSleeveFilter = '';

    function toggleSleeveFilter(sleeve) {
      // If clicking the same sleeve, clear the filter
      if (currentSleeveFilter === sleeve) {
        filterBySleeve('');
      } else {
        filterBySleeve(sleeve);
      }
    }

    function filterBySleeve(sleeve) {
      currentSleeveFilter = sleeve;
      const rows = document.querySelectorAll('#assets-tbody tr');
      const filter = document.getElementById('sleeve-filter');
      const footer = document.getElementById('table-footer');
      const sleeveRows = document.querySelectorAll('.sleeve-row');

      // Update sleeve selection state
      sleeveRows.forEach(row => {
        if (sleeve && row.dataset.sleeve === sleeve) {
          row.classList.add('selected');
        } else {
          row.classList.remove('selected');
        }
      });

      // Update dropdown
      filter.value = sleeve;

      // Filter table rows and count
      let shown = 0;
      const total = rows.length;

      rows.forEach(row => {
        const rowSleeve = row.dataset.sleeve;
        // For satellite, also show growth (child sleeve)
        const shouldShow = !sleeve ||
          rowSleeve === sleeve ||
          (sleeve === 'satellite' && rowSleeve === 'growth');

        row.style.display = shouldShow ? '' : 'none';
        if (shouldShow) shown++;
      });

      // Update footer
      if (sleeve) {
        const sleeveName = sleeve.charAt(0).toUpperCase() + sleeve.slice(1);
        footer.textContent = `Showing ${shown} of ${total} assets (${sleeveName})`;
      } else {
        footer.textContent = `Showing ${total} of ${total} assets`;
      }
    }
  </script>
</body>
</html>
